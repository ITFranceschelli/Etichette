<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Etichetta</title>
  <style>
    @media print {
      html, body {
        margin: 0;
        padding: 0;
        width: 101mm;
        height: 54mm;
        overflow: hidden;
      }
      #etichetta {
        width: 101mm;
        height: 54mm;
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        position: absolute;
        top: 0;
        left: 0;
        font-family: Helvetica, sans-serif;
        overflow: hidden;
        page-break-after: avoid;
      }
    }
  </style>
</head>
<body>
  <div id="etichetta">
    <div style="display: flex; flex-direction: row;">
      <div style="width:10mm;"></div>

      <div style="flex:1;">

        <!-- Logo + Barcode -->
        <div style="display:flex; max-width:100mm; justify-content:space-between; align-items:center; margin:0; padding:0;">
          <img id="logo" style="max-width:50mm; max-height:19mm; object-fit: contain;" />
          <img id="barcode" style="max-width:50mm; max-height:19mm; object-fit: contain;" />
        </div>

        <!-- Codice Prodotto -->
        <div id="codice" style="font-size:160%; padding:0; overflow-wrap: break-word; max-height:8mm; margin-top:2mm;"></div>

        <!-- Descrizione + label "Scadenza" -->
        <div style="display:flex; justify-content:space-between; font-size:100%; margin:0; max-height:12mm;">
          <span id="descrizione" style="width:65%; margin:0; padding:0; overflow-wrap: break-word;"></span>
          <span style="width:35%; margin:0; padding:0; text-align:right; white-space: nowrap;">
            Scadenza
          </span>
        </div>

        <!-- Peso + QuantitÃ  + Data Scadenza -->
        <div style="display:flex; justify-content:space-between; font-size:100%; margin:0; max-height:10mm;">
          <span id="pesoinfo" style="width:65%; margin:0; padding:0; overflow-wrap: break-word;"></span>
          <span id="scadenza" style="width:35%; margin:0; padding:0; text-align:right; white-space: nowrap;"></span>
        </div>

        <!-- Footer -->
        <div style="font-size:70%; color:gray; text-align:center; margin-top:1mm; display:flex; justify-content:center; max-height:5mm;">
          <span style="width:100%; margin:0; padding:0; text-align:center; white-space: normal;">
            Campionatura non destinata alla vendita
          </span>
        </div>

      </div>
    </div>
  </div>

  <script>
    const p = new URLSearchParams(window.location.search);

    document.getElementById("logo").src = decodeURIComponent(p.get("logo") || "");
    document.getElementById("barcode").src = decodeURIComponent(p.get("barcode") || "");
    document.getElementById("codice").textContent = decodeURIComponent(p.get("codice") || "");
    document.getElementById("descrizione").textContent = decodeURIComponent(p.get("descrizione") || "");

    const peso = p.get("peso") || "";
    const conf = p.get("conf") || "";
    const crt = p.get("crt") || "";
    const plt = p.get("plt") || "";

    document.getElementById("pesoinfo").textContent = `${peso}kg x ${conf}  |  ${crt}crt X ${plt}plt`;

    const scadenza = p.get("scadenza") || "";
    document.getElementById("scadenza").textContent = decodeURIComponent(scadenza);

    setTimeout(() => {
      window.print();
    }, 500);
  </script>
</body>
</html>
